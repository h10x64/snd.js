/**
 * snd.js - The Sound Library for JavaScript with WebAudioAPI - v.0.9
 * 
 * The MIT License (MIT)
 * copyright (c) 2014 N_H <h.10x64@gmail.com>
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 * 
 **/
snd.INIT_EVENT_LISTENERS.push(function(){snd.ENCODE=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9","+","/"],snd.DECODE={A:0,B:1,C:2,D:3,E:4,F:5,G:6,H:7,I:8,J:9,K:10,L:11,M:12,N:13,O:14,P:15,Q:16,R:17,S:18,T:19,U:20,V:21,W:22,X:23,Y:24,Z:25,a:26,b:27,c:28,d:29,e:30,f:31,g:32,h:33,i:34,j:35,k:36,l:37,m:38,n:39,o:40,p:41,q:42,r:43,s:44,t:45,u:46,v:47,w:48,x:49,y:50,z:51,0:52,1:53,2:54,3:55,4:56,5:57,6:58,7:59,8:60,9:61,"+":62,"/":63},snd.ENCRYPT_BASE_URL="./lib/encrypt.rb?file=",snd.KEY_GEN_BASE_URL="./lib/createKey.rb?code=",snd.AudioDataManager.prototype.addEncryptSource=function(a,b){var c=this,d=snd.ENCRYPT_BASE_URL+b;this._dataMap[a]={doesLoaded:!1};var e=new XMLHttpRequest;e.open("GET",d,!0),e.responseType="text",e.onload=function(){return e.response?void c.decrypt(e.response,function(b){snd.AUDIO_CONTEXT.decodeAudioData(b,function(b){c._dataMap[a].data=b,c._dataMap[a].doesLoaded=!0,c.loaded(a,b)})}):void console.error("Request Failed: "+e.status)},this._requests[a]=e},snd.AudioDataManager.prototype.decrypt=function(a,b){var c=a.split("|"),d=c[0],e=c[1],f=new XMLHttpRequest;f.open("GET",snd.KEY_GEN_BASE_URL+d,!0),f.responseType="json",f.onload=function(){if(!f.response)return void console.error("Request Failed: "+f.status);for(var a=[],c=0,d=f.response.key,g=0;g<e.length;g++){if("\n"!=e[g]&&"="!=e[g]){var h=snd.DECODE[e[g]];h=h>=d[c]?h-d[c]:h-d[c]+64,a.push(snd.ENCODE[h])}else"="==e[g]&&a.push(e[g]);c++,c%=d.length}for(var i=window.atob(a.join("")),j=new ArrayBuffer(i.length),k=new Uint8Array(j),g=0;g<j.byteLength;g++)k[g]=255&i.charCodeAt(g);b(j)},f.send()}});