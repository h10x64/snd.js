/**
 * snd.js - The Sound Library for JavaScript with WebAudioAPI - v.1.0 beta
 * 
 * The MIT License (MIT)
 * copyright (c) 2014 - 2015 N_H <h.10x64@gmail.com>
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 * 
 **/
snd.CLASS_DEF.push(function(){snd.MediaElementAudioSource=function(a,b){snd.Source.apply(this,arguments),this.id=a,this.listeners={onplay:[],onpause:[],onended:[],onabort:[],oncanplay:[],oncanplaythrough:[],ondurationchange:[],onemptied:[],onerror:[],onloadeddata:[],onloadedmetadata:[],onloadstart:[],onplaying:[],onprogress:[],onratechange:[],onseeked:[],onseeking:[],onstalled:[],onsuspend:[],ontimeupdate:[],onvolumechange:[],onwaiting:[]},Object.defineProperties(this,{element:{get:function(){return this._element},set:function(a){var b=this;this._source=snd.AUDIO_CONTEXT.createMediaElementSource(a),this._source.connect(this._gain),this._element=a,null!=this._element.id&&(this._status.element=this._element.id),this._element.onplay=function(){b._status.status=snd.status.STARTED;for(var a=0;a<b.listeners.onplay.length;a++)b.listeners.onplay[a](b)},this._element.onpause=function(){b._status.status=snd.status.PAUSED;for(var a=0;a<b.listeners.onpause.length;a++)b.listeners.onpause[a](b)},this._element.onended=function(){b._status.status=snd.status.PAUSED;for(var a=0;a<b.listeners.onended.length;a++)b.listeners.onended[a](b)},this._element.onabort=function(){for(var a=0;a<b.listeners.onabort.length;a++)b.listeners.onabort[a](b)},this._element.oncanplay=function(){b.status==snd.status.NONE&&(b._status.status=snd.status.READY);for(var a=0;a<b.listeners.oncanplay.length;a++)b.listeners.oncanplay[a](b)},this._element.oncanplaythrough=function(){for(var a=0;a<b.listeners.oncanplaythrough.length;a++)b.listeners.oncanplaythrough[a](b)},this._element.ondurationchange=function(){for(var a=0;a<b.listeners.ondurationchange.length;a++)b.listeners.ondurationchange[a](b)},this._element.onemptied=function(){for(var a=0;a<b.listeners.onemptied.length;a++)b.listeners.onemptied[a](b)},this._element.onerror=function(){for(var a=0;a<b.listeners.onerror.length;a++)b.listeners.onerror[a](b)},this._element.onloadeddata=function(){for(var a=0;a<b.listeners.onloadeddata.length;a++)b.listeners.onloadeddata[a](b)},this._element.onloadedmetadata=function(){for(var a=0;a<b.listeners.onloadedmetadata.length;a++)b.listeners.onloadedmetadata[a](b)},this._element.onloadedstart=function(){for(var a=0;a<b.listeners.onloadstart.length;a++)b.listeners.onloadstart[a](b)},this._element.onplaying=function(){for(var a=0;a<b.listeners.onplaying.length;a++)b.listeners.onplaying[a](b)},this._element.onprogress=function(){for(var a=0;a<b.listeners.onprogress.length;a++)b.listeners.onprogress[a](b)},this._element.onratechange=function(){for(var a=0;a<b.listeners.onratechange.length;a++)b.listeners.onratechange[a](b)},this._element.onseeked=function(){for(var a=0;a<b.listeners.onseeked.length;a++)b.listeners.onseeked[a](b)},this._element.onseeking=function(){for(var a=0;a<b.listeners.onseeking.length;a++)b.listeners.onseeking[a](b)},this._element.onstalled=function(){for(var a=0;a<b.listeners.onstalled.length;a++)b.listeners.onstalled[a](b)},this._element.onsuspend=function(){for(var a=0;a<b.listeners.onsuspend.length;a++)b.listeners.onsuspend[a](b)},this._element.ontimeupdate=function(){for(var a=0;a<b.listeners.ontimeupdate.length;a++)b.listeners.ontimeupdate[a](b)},this._element.onvolumechange=function(){for(var a=0;a<b.listeners.onvolumechange.length;a++)b.listeners.onvolumechange[a](b)},this._element.onwaiting=function(){for(var a=0;a<b.listeners.onwaiting.length;a++)b.listeners.onwaiting[a](b)}}},src:{get:function(){return this._element.src},set:function(a){this._element.src=a}}}),null!=b&&(this.element=b)},snd.MediaElementAudioSource.prototype=Object.create(snd.Source.prototype),snd.MediaElementAudioSource.prototype.constructor=snd.MediaElementAudioSource,snd.MediaElementAudioSource.CLASS_NAME="snd.MediaElementAudioSource",snd.MediaElementAudioSource.prototype.load=function(){this._element.load()},snd.MediaElementAudioSource.prototype.start=function(){this._element.play()},snd.MediaElementAudioSource.prototype.pause=function(){this._element.pause()},snd.MediaElementAudioSource.prototype.stop=function(){this._element.pause(),this._element.currentTime=0},snd.MediaElementAudioSource.prototype.setLoop=function(a){this._element.loop=a},snd.MediaElementAudioSource.prototype.addOnPlayEventListener=function(a){this.listeners.onplay.push(a)},snd.MediaElementAudioSource.prototype.removeOnPlayEventListener=function(a){for(var b=this.listeners.onplay,c=0;c<b.length;c++)if(b[c]===a)return b.splice(c,1),!0;return!1},snd.MediaElementAudioSource.prototype.addOnPauseEventListener=function(a){this.listeners.onPause.push(a)},snd.MediaElementAudioSource.prototype.removeOnPauseEventListener=function(a){for(var b=this.listeners.onPause,c=0;c<b.length;c++)if(b[c]===a){b.splice(c,1);break}},snd.MediaElementAudioSource.prototype.addOnEndedEventListener=function(a){this.listeners.onended.push(a)},snd.MediaElementAudioSource.prototype.removeOnEndedEventListener=function(a){for(var b=this.listeners.onended,c=0;c<b.length;c++)if(b[c]===a)return b.splice(c,1),!0;return!1},snd.MediaElementAudioSource.prototype.addOnAbortEventListener=function(a){this.listeners.onabort.push(a)},snd.MediaElementAudioSource.prototype.removeOnAbortEventListener=function(a){for(var b=this.listeners.onabort,c=0;c<b.length;c++)if(b[c]===a)return b.splice(c,1),!0;return!1},snd.MediaElementAudioSource.prototype.addOnCanPlayEventListener=function(a){this.listeners.oncanplay.push(a)},snd.MediaElementAudioSource.prototype.removeOnCanPlayEventListener=function(a){for(var b=this.listeners.oncanplay,c=0;c<b.length;c++)if(b[c]===a)return b.splice(c,1),!0;return!1},snd.MediaElementAudioSource.prototype.addOnCanPlayThroughEventListener=function(a){this.listeners.oncanplaythrough.push(a)},snd.MediaElementAudioSource.prototype.removeOnCanPlayThroughEventListener=function(a){for(var b=this.listeners.onplaythrough,c=0;c<b.length;c++)if(b[c]===a)return b.splice(c,1),!0;return!1},snd.MediaElementAudioSource.prototype.addOnDurationChangeEventListener=function(a){this.listeners.ondurationchange.push(a)},snd.MediaElementAudioSource.prototype.removeOnCanPlayThroughEventListener=function(a){for(var b=this.listeners.ondurationchange,c=0;c<b.length;c++)if(b[c]===a)return b.splice(c,1),!0;return!1},snd.MediaElementAudioSource.prototype.addOnEmptiedEventListener=function(a){this.listeners.onemptied.push(a)},snd.MediaElementAudioSource.prototype.removeOnEmptiedEventListener=function(a){for(var b=this.listeners.onemptied,c=0;c<b.length;c++)if(b[c]===a)return b.splice(c,1),!0;return!1},snd.MediaElementAudioSource.prototype.addOnErrorEventListener=function(a){this.listeners.onerror.push(a)},snd.MediaElementAudioSource.prototype.removeOnErrorEventListener=function(a){for(var b=this.listeners.onerror,c=0;c<b.length;c++)if(b[c]===a)return b.splice(c,1),!0;return!1},snd.MediaElementAudioSource.prototype.addOnLoadedDataEventListener=function(a){this.listeners.onloadeddata.push(a)},snd.MediaElementAudioSource.prototype.removeOnLoadedDataEventListener=function(a){for(var b=this.listeners.onloadeddata,c=0;c<b.length;c++)if(b[c]===a)return b.splice(c,1),!0;return!1},snd.MediaElementAudioSource.prototype.addOnLoadedMetadataEventListener=function(a){this.listeners.onloadedmetadata.push(a)},snd.MediaElementAudioSource.prototype.removeOnLoadedMetaDataEventListener=function(a){for(var b=this.listeners.onloadedmetadata,c=0;c<b.length;c++)if(b[c]===a)return b.splice(c,1),!0;return!1},snd.MediaElementAudioSource.prototype.addOnLoadStartEventListener=function(a){this.listeners.onloadstart.push(a)},snd.MediaElementAudioSource.prototype.removeOnLoadStartEventListener=function(a){for(var b=this.listeners.onloadstart,c=0;c<b.length;c++)if(b[c]===a)return b.splice(c,1),!0;return!1},snd.MediaElementAudioSource.prototype.addOnPlayingEventListener=function(a){this.listeners.onPlaying.push(a)},snd.MediaElementAudioSource.prototype.removeOnPlayingEventListener=function(a){for(var b=this.listeners.onPlaying,c=0;c<b.length;c++)if(b[c]===a)return b.splice(c,1),!0;return!1},snd.MediaElementAudioSource.prototype.addOnProgressEventListener=function(a){this.listeners.onprogress.push(a)},snd.MediaElementAudioSource.prototype.removeOnProgressEventListener=function(a){for(var b=this.listeners.onprogress,c=0;c<b.length;c++)if(b[c]===a)return b.splice(c,1),!0;return!1},snd.MediaElementAudioSource.prototype.addOnRateChangeEventListener=function(a){this.listeners.onratechange.push(a)},snd.MediaElementAudioSource.prototype.removeOnRateChangeEventListener=function(a){for(var b=this.listeners.onratechange,c=0;c<b.length;c++)if(b[c]===a)return b.splice(c,1),!0;return!1},snd.MediaElementAudioSource.prototype.addOnSeekedEventListener=function(a){this.listeners.onseeked.push(a)},snd.MediaElementAudioSource.prototype.removeOnSeekedEventListener=function(a){for(var b=this.listeners.onseeked,c=0;c<b.length;c++)if(b[c]===a)return b.splice(c,1),!0;return!1},snd.MediaElementAudioSource.prototype.addOnSeekingEventListener=function(a){this.listeners.onseeking.push(a)},snd.MediaElementAudioSource.prototype.removeOnSeekingEventListener=function(a){for(var b=this.listeners.onseeking,c=0;c<b.length;c++)if(b[c]===a)return b.splice(c,1),!0;return!1},snd.MediaElementAudioSource.prototype.addOnStalledEventListener=function(a){this.listeners.onstalled.push(a)},snd.MediaElementAudioSource.prototype.removeOnStalledEventListener=function(a){for(var b=this.listeners.onstalled,c=0;c<b.length;c++)if(b[c]===a)return b.splice(c,1),!0;return!1},snd.MediaElementAudioSource.prototype.addOnSuspendEventListener=function(a){this.listeners.onsuspend.push(a)},snd.MediaElementAudioSource.prototype.removeOnSuspendEventListener=function(a){for(var b=this.listeners.onsuspend,c=0;c<b.length;c++)if(b[c]===a)return b.splice(c,1),!0;return!1},snd.MediaElementAudioSource.prototype.addOnTimeUpdateEventListener=function(a){this.listeners.ontimeupdate.push(a)},snd.MediaElementAudioSource.prototype.removeOnTimeUpdateEventListener=function(a){for(var b=this.listeners.ontimeupdate,c=0;c<b.length;c++)if(b[c]===a)return b.splice(c,1),!0;return!1},snd.MediaElementAudioSource.prototype.addOnVolumeChangeEventListener=function(a){this.listeners.onvolumechange.push(a)},snd.MediaElementAudioSource.prototype.removeOnVolumeChangeEventListener=function(a){for(var b=this.listeners.onvolumechange,c=0;c<b.length;c++)if(b[c]===a)return b.splice(c,1),!0;return!1},snd.MediaElementAudioSource.prototype.addOnWaitingEventListener=function(a){this.listeners.onwaiting.push(a)},snd.MediaElementAudioSource.prototype.removeOnWaitingEventListener=function(a){for(var b=this.listeners.onwaiting,c=0;c<b.length;c++)if(b[c]===a)return b.splice(c,1),!0;return!1},snd.MediaElementAudioSource.prototype.createStatus=function(){return new snd.MediaElementAudioSource.Status},snd.MediaElementAudioSource.prototype.toJSON=function(){return this._status},snd.MediaElementAudioSource.prototype.loadData=function(a){if(snd.Source.prototype.loadData.apply(this,arguments),null!=a.element){var b=document.getElementById(a.element);null!=b&&(this.element=b)}},snd.MediaElementAudioSource.loadJSON=function(a){var b=JSON.parse(a);if(b.className!=snd.MediaElementAudioSource.CLASS_NAME)throw new snd.Exception(b.id+" is not instance of 'snd.MediaElementAudioSource' class.");var c=new snd.MediaElementAudioSource("");return c.loadData(b),c},snd.MediaElementAudioSource.Status=function(){snd.Source.Status.apply(this,arguments),this.className=snd.MediaElementAudioSource.CLASS_NAME,this.status=snd.status.NONE,this.element=""},snd.MediaElementAudioSource.Status.prototype=Object.create(snd.Source.Status.prototype),snd.MediaElementAudioSource.Status.prototype.constructor=snd.MediaElementAudioSource.Status});